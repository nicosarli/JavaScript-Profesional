{"id":"ejercicios/promises.html","dependencies":[{"name":"D:\\Cursos Platzi\\JavaScript-Profesional\\.babelrc","includedInParent":true,"mtime":1627014060469},{"name":"D:\\Cursos Platzi\\JavaScript-Profesional\\package.json","includedInParent":true,"mtime":1627014357661}],"generated":{"html":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Promises</title>\r\n</head>\r\n\r\n<body>\r\n    <a href=\"/ejercicios/\">Go back</a>\r\n\r\n    <ul>\r\n        <li>\r\n            <button id=\"sequence\"> Get Top Characters in Secuence </button>\r\n        </li>\r\n        <li>\r\n            <button id=\"parallel\"> Get Top Characters in Parallel </button>\r\n        </li>\r\n        <li>\r\n            <button id=\"fastest\"> Get Fastest Top Character </button>\r\n        </li>\r\n    </ul>\r\n\r\n    <ul id=\"movies\"></ul>\r\n\r\n    <script>const apiKey = '7fb1064272f72fa6dd9e3fff278f5940'; // Call API\n\nasync function getMovie(id) {\n  const url = `https://api.themoviedb.org/3/movie/${id}?api_key=${apiKey}`;\n  const response = await fetch(url);\n  const data = await response.json();\n  return data;\n}\n\nasync function getPopularMovies() {\n  const url = `https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=${apiKey}`;\n  const response = await fetch(url);\n  const data = await response.json();\n  return data.results;\n} // Functions\n\n\nasync function getTopMoviesIds(n = 5) {\n  const popularMovies = await getPopularMovies();\n  const ids = popularMovies.slice(0, n).map(movie => movie.id);\n  return ids;\n}\n\nasync function renderMovies(movie) {\n  const movieList = document.getElementById(\"movies\");\n  movieList.innerHTML = '';\n  movie.forEach(movie => {\n    const listItem = document.createElement(\"li\");\n    listItem.innerHTML = `\n                    <h1>${movie.title}</h1>\n                    <img src=\"https://image.tmdb.org/t/p/w342${movie.poster_path}\" />\n                    <p>Released on <em>${movie.release_date}</em></p>`;\n    movieList.appendChild(listItem);\n  });\n} // Buttons Functions\n\n\nasync function getTopMoviesInSequence() {\n  const ids = await getTopMoviesIds();\n  const movies = [];\n\n  for (const id of ids) {\n    const movie = await getMovie(id);\n    movies.push(movie);\n  }\n\n  return movies;\n}\n\nasync function getTopMoviesInParallel() {\n  const ids = await getTopMoviesIds();\n  const moviePromises = ids.map(id => getMovie(id));\n  const movies = await Promise.all(moviePromises);\n  return movies;\n}\n\nasync function getFastestTopMovie() {\n  const ids = await getTopMoviesIds();\n  const moviePromises = ids.map(id => getMovie(id));\n  const movie = await Promise.race(moviePromises);\n  return movie;\n} // Buttons\n\n\ndocument.getElementById(\"sequence\").onclick = async () => {\n  const movies = await getTopMoviesInSequence();\n  renderMovies(movies);\n};\n\ndocument.getElementById(\"parallel\").onclick = async () => {\n  const movies = await getTopMoviesInParallel();\n  renderMovies(movies);\n};\n\ndocument.getElementById(\"fastest\").onclick = async () => {\n  const movies = await getFastestTopMovie();\n  renderMovies([movies]);\n};</script>\r\n</body>\r\n\r\n</html>"},"sourceMaps":null,"error":null,"hash":"1fbd4bf34687018f76807c35371dbee5","cacheData":{"env":{}}}